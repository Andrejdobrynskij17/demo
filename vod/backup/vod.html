<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Movie Collections</title>
    <meta name="keywords" content="movie, tv, radio" />
    <meta name="bookmark-image" content="../images/logo.png" />
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />

    <link media="all" href="../css/autoptimize.css" rel="stylesheet" />
    <script defer src="../js/autoptimize.js"></script>

    <link rel="stylesheet" href="../css/mytheme-font.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-ui.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-site.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-share.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-color.css" type="text/css" name="default" />

    <script type="text/javascript" src="../js/jquery.min.js"></script>

    <script type="text/javascript" src="../js/mytheme-site.js"></script>
    <script type="text/javascript" src="../js/mytheme-ui.js"></script>
    <script type="text/javascript" src="../js/mytheme-cms.js"></script>

    <link rel="stylesheet" href="../css/mystyle.css" type="text/css" />
    <script type="text/javascript" src="../js/myjavascript.js"></script>

</head>

<body>
  <header class="myui-header__top clearfix" id="header-top">
    <div class="container" style="margin-bottom: 4px;">
        <div class="row">
            <div class="myui-header_bd clearfix">
                <div class="myui-header__logo" style="padding-top: 5px;">
                    <a class="" href="../index.html">
                        <img class="img-responsive hidden-xs" src="../images/logo.png" style="width:100px;height:50px" />
                        <img class="img-responsive visible-xs" src="../images/logo.png" style="width:80px;height:40px" />
                    </a>
                </div>
                <ul class="myui-header__menu">
                    <li class="menu_header"><a href="index.html?t=1">冒险片</a></li>
                    <li class="menu_header"><a href="index.html?t=2">剧情片</a></li>
                    <li class="menu_header"><a href="index.html?t=3">动作片</a></li>
                    <li class="menu_header"><a href="index.html?t=4">动画电影片</a></li>
                    <li class="menu_header"><a href="index.html?t=5">同性片</a></li>
                    <li class="menu_header"><a href="index.html?t=6">喜剧片</a></li>
                    <li class="menu_header"><a href="index.html?t=7">奇幻片</a></li>
                    <li class="menu_header"><a href="index.html?t=8">恐怖片</a></li>
                    <li class="menu_header"><a href="index.html?t=9">悬疑片</a></li>
                    <li class="menu_header"><a href="index.html?t=10">惊悚片</a></li>
                    <li class="menu_header"><a href="index.html?t=11">战争片</a></li>
                    <li class="menu_header"><a href="index.html?t=12">歌舞片</a></li>
                    <li class="menu_header"><a href="index.html?t=13">灾难片</a></li>
                    <li class="menu_header"><a href="index.html?t=14">爱情片</a></li>
                    <li class="menu_header"><a href="index.html?t=15">犯罪片</a></li>
                    <li class="menu_header"><a href="index.html?t=16">科幻片</a></li>
                    <li class="menu_header"><a href="index.html?t=17">经典片</a></li>
                    <li class="menu_header"><a href="index.html?t=18">网络电影片</a></li>

                    <li class="menu_header"><a href="index.html?t=101">欧美剧</a></li>
                    <li class="menu_header"><a href="index.html?t=102">日剧</a></li>
                    <li class="menu_header"><a href="index.html?t=103">韩剧</a></li>
                    <li class="menu_header"><a href="index.html?t=104">国产剧</a></li>
                    <li class="menu_header"><a href="index.html?t=105">泰剧</a></li>
                    <li class="menu_header"><a href="index.html?t=106">港剧</a></li>
                    <li class="menu_header"><a href="index.html?t=107">台剧</a></li>
                    <li class="menu_header"><a href="index.html?t=108">新马剧</a></li>
                    <li class="menu_header"><a href="index.html?t=109">其他剧</a></li>

                    <li class="menu_header"><a href="index.html?t=201">欧美综艺</a></li>
                    <li class="menu_header"><a href="index.html?t=202">日本综艺</a></li>
                    <li class="menu_header"><a href="index.html?t=203">韩国综艺</a></li>
                    <li class="menu_header"><a href="index.html?t=204">国产综艺</a></li>
                    <li class="menu_header"><a href="index.html?t=206">港台综艺</a></li>
                    <li class="menu_header"><a href="index.html?t=207">其他综艺</a></li>

                    <li class="menu_header"><a href="index.html?t=301">欧美动漫</a></li>
                    <li class="menu_header"><a href="index.html?t=302">日本动漫</a></li>
                    <li class="menu_header"><a href="index.html?t=303">韩国动漫</a></li>
                    <li class="menu_header"><a href="index.html?t=304">国产动漫</a></li>
                    <li class="menu_header"><a href="index.html?t=306">港台动漫</a></li>
                    <li class="menu_header"><a href="index.html?t=307">其他动漫</a></li>
                    <li class="menu_header"><a href="index.html?t=401">体育赛事</a></li>
                    <li class="menu_header"><a href="index.html?t=501">纪录片</a></li>                    
                </ul>
            </div>

        </div>
    </div>
    </div>
    </header>

  <div class="container">
    <div class="row">
        <div class="myui-panel myui-panel-bg clearfix">
            <div class="myui-panel-box clearfix" id="movielist">

            </div>
        </div>
    </div>
  </div>

  <ul class="myui-page text-center clearfix">
  </ul>

  <div class="myui-foot clearfix">
    <div class="container min">
        <div class="row">
            <div class="col-pd text-center masked">
                <p class="">To temporarily unlock access to the demo, click on the following link:
                    <a href="https://cors-anywhere.herokuapp.com/corsdemo">cors-anywhere</a>
                    <span class="split-line"></span>
                </p>
                <p class="margin-0">本站為程式開發測試之用，資料蒐集於網際網路，版權歸官方所有 Powered by PKJ Studio 2022</p>
            </div>
        </div>
    </div>
</div>



<script>

  var urlParams;
  (window.onpopstate = function () {
    var match,
      pl     = /\+/g,  // Regex for replacing addition symbol with a space
      search = /([^&=]+)=?([^&]*)/g,
      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
      query  = window.location.search.substring(1);

    urlParams = {};
    while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);
  })();


  if (urlParams["id"] == null){ var id = ""; } else { var id = urlParams["id"];}

  var urlAPI = 'https://api.haiwaikan.com/v1/vod?ac=detail';
  var cors_api_url = 'https://cors-anywhere.herokuapp.com/';

  function doCORSRequest(options, printResult) {
    var x = new XMLHttpRequest();
    x.open(options.method, cors_api_url + options.url);
    x.onload = x.onerror = function() 
    {
      var data = JSON.parse(x.responseText);

      page = data.page;
      pagecount = data.pagecount;

      let htmlString = '<ul>';
      
      for (let file of data.list) {
        var m3u8 = file.vod_play_url.split('#')[0].split('$')[1];
        var img = file.vod_pic;
        var title = file.vod_name;
        var year = file.vod_year;
        var quality = file.vod_play_url.split('#')[0].split('$')[0];
        var type_id = file.type_id;
        var type_name = file.type_name;
        var area = file.vod_area;
        var lang = file.vod_lang;
        var actor = file.vod_actor;
        var director = file.vod_director;
        var content = file.vod_content;
        var remarks = file.vod_remarks;
        var vod_time = file.vod_time;

        htmlString += '<li class="col-lg-4 col-md-3 col-sm-2 col-xs-1">';
        htmlString += '<div class="myui-vodlist__box">';
        htmlString += '<a class="myui-vodlist__thumb lazyload" href="'+ m3u8 + '" ';
        htmlString += 'title="' + title +'" ';
        htmlString += 'data-original="' + img + '" ';
        htmlString += 'style="background-image: url(' + img +')"';

        htmlString += '<span class="play hidden-xs"></span>';
        htmlString += '<span class="pic-tag pic-tag-top" style="background-color: #5bb7fe;">' + quality+'</span>';
        htmlString += '<span class="pic-text text-right">'+year+'</span>';
        htmlString += '<span class="pic-text text-left">'+type_name+'</span>';

        htmlString += '</a>';
        htmlString += '</div>';
        htmlString += '<div class="myui-vodlist__detail">';
        htmlString += '<h4 class="title text-overflow"><a href="'+m3u8+'">'+title+'</a></h4>';
        htmlString += '</div>';
        htmlString += '</li>';

        htmlString += '<li class="col-lg-2 col-md-2 col-sm-1 col-xs-1">';

        htmlString += '<div class="myui-content__detail">';
        htmlString += '<h1 class="title">'+ title +'</h1>';
				htmlString += '<p class="data">';
        htmlString += '<span class="text-muted">分類：</span><a href="index.html?t='+type_id+'">'+type_name+'</a>';
        htmlString += '<span class="split-line"></span>';
        htmlString += '<span class="text-muted hidden-xs">地區：</span>'+area;
        htmlString += '<span class="split-line"></span>';
        htmlString += '<span class="text-muted hidden-xs">年份：</span>'+year;
				htmlString += '</p>';
				htmlString += '<p class="data"><span class="text-muted">主演：</span>'+actor+'</p>';
				htmlString += '<p class="data"><span class="text-muted">導演：</span>'+director+'</p>';
				htmlString += '<p class="data"><span class="text-muted">狀態：</span>'+remarks+'</p>';
				htmlString += '<p class="data"><span class="text-muted">更新：</span>'+vod_time+'</p>';
        htmlString += '<p class="data"><span class="text-muted">簡介：</span></p>'+content;
        htmlString += '</div>';

        htmlString += '</li>';


        htmlString += '<li class="col-lg-2 col-md-2 col-sm-2 col-xs-1">';
        htmlString += '<div style="margin: 10px; padding: 4px; opacity:1 !important;">';

        const playlists = file.vod_play_url.split('#');
        if( playlists.length == 1 ){
            htmlString += '<button class="btn btn-primary" type="button">';
            htmlString += '<a style="font-size: 24px;" href="'+m3u8+'">Play</a></button>';
        } else {
          for (let pl of playlists){
              const p = pl.split('$');
              var pl_name = p[0];
              var pl_m3u8 = p[1];
              // htmlString += '<button class="btn btn-outline-primary" type="button" style="width:120px;margin:2px">';
              htmlString += '<a style="font-size: 20px;" href="'+pl_m3u8+'"><button class="btn btn-outline-primary" type="button" style="width:120px;margin:2px">'+pl_name+'</button></a>';
          }
        }

        htmlString += '</div>';
        htmlString += '</li>';


      }

      htmlString += '</ul>';
      document.getElementsByClassName('myui-panel-box clearfix')[0].innerHTML = htmlString;

    }
    x.send(options.data);
    return result;
  }


  var urlField = urlAPI + '&ids=' + id;
  var outputField = document.getElementById('output');
  var j = doCORSRequest(
    { method: 'GET', url: urlField, }, 
    function printResult(result) {
        outputField.value = result;
    }
  )


</script>

<body>
</html>



