<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Movie Collections</title>
    <meta name="keywords" content="movie, tv, radio" />
    <meta name="bookmark-image" content="../images/logo.png" />
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />

    <link media="all" href="../css/autoptimize.css" rel="stylesheet" />
    <script defer src="../js/autoptimize.js"></script>

    <link rel="stylesheet" href="../css/mytheme-font.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-ui.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-site.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-share.css" type="text/css" />
    <link rel="stylesheet" href="../css/mytheme-color.css" type="text/css" name="default" />

    <script type="text/javascript" src="../js/jquery.min.js"></script>

    <script type="text/javascript" src="../js/mytheme-site.js"></script>
    <script type="text/javascript" src="../js/mytheme-ui.js"></script>
    <script type="text/javascript" src="../js/mytheme-cms.js"></script>

    <link rel="stylesheet" href="../css/mystyle.css" type="text/css" />
    <script type="text/javascript" src="../static/js/myjavascript.js"></script>

</head>

<body>
  <header class="myui-header__top clearfix" id="header-top">
    <div class="container" style="margin-bottom: 4px;">
        <div class="row">
            <div class="myui-header_bd clearfix">
                <div class="myui-header__logo" style="padding-top: 5px;">
                    <a class="" href="../vod/index.html">
                        <img class="img-responsive hidden-xs" src="../images/logo.png" style="width:100px;height:50px" />
                        <img class="img-responsive visible-xs" src="../images/logo.png" style="width:80px;height:40px" />
                    </a>
                </div>

                <ul class="myui-header__menu">
                    <!-- <li class="active"><a class="logo" href="/">Home</a></li> -->
                    <li class="menu_header"><a href="index.html?t=1">冒险片</a></li>
                    <li class="menu_header"><a href="index.html?t=2">剧情片</a></li>
                    <li class="menu_header"><a href="index.html?t=3">动作片</a></li>
                    <li class="menu_header"><a href="index.html?t=4">动画电影片</a></li>
                    <li class="menu_header"><a href="index.html?t=5">同性片</a></li>
                    <li class="menu_header"><a href="index.html?t=6">喜剧片</a></li>
                    <li class="menu_header"><a href="index.html?t=7">奇幻片</a></li>
                    <li class="menu_header"><a href="index.html?t=8">恐怖片</a></li>
                    <li class="menu_header"><a href="index.html?t=9">悬疑片</a></li>
                    <li class="menu_header"><a href="index.html?t=10">惊悚片</a></li>
                    <li class="menu_header"><a href="index.html?t=11">战争片</a></li>
                    <li class="menu_header"><a href="index.html?t=12">歌舞片</a></li>
                    <li class="menu_header"><a href="index.html?t=13">灾难片</a></li>
                    <li class="menu_header"><a href="index.html?t=14">爱情片</a></li>
                    <li class="menu_header"><a href="index.html?t=15">犯罪片</a></li>
                    <li class="menu_header"><a href="index.html?t=16">科幻片</a></li>
                    <li class="menu_header"><a href="index.html?t=17">经典片</a></li>
                    <li class="menu_header"><a href="index.html?t=18">网络电影片</a></li>
                </ul>
            </div>

            <ul class="myui-header__user">
            </ul>
<!-- 
            # "1"	"冒险片"
            # "2"	"剧情片"
            # "3"	"动作片"
            # "4"	"动画电影片"
            # "5"	"同性片"
            # "6"	"喜剧片"
            # "7"	"奇幻片"
            # "8"	"恐怖片"
            # "9"	"悬疑片"
            # "10"	"惊悚片"
            # "11"	"战争片"
            # "12"	"歌舞片"
            # "13"	"灾难片"
            # "14"	"爱情片"
            # "15"	"犯罪片"
            # "16"	"科幻片"
            # "17"	"经典片"
            # "18"	"网络电影片"
            # "101"	"欧美剧"
            # "102"	"日剧"
            # "103"	"韩剧"
            # "104"	"国产剧"
            # "105"	"泰剧"
            # "106"	"港剧"
            # "107"	"台剧"
            # "108"	"新马剧"
            # "109"	"其他剧"
            # "201"	"欧美综艺"
            # "202"	"日本综艺"
            # "203"	"韩国综艺"
            # "204"	"国产综艺"
            # "206"	"港台综艺"
            # "207"	"其他综艺"
            # "301"	"欧美动漫"
            # "302"	"日本动漫"
            # "303"	"韩国动漫"
            # "304"	"国产动漫"
            # "306"	"港台动漫"
            # "307"	"其他动漫"
            # "401"	"体育赛事"
            # "501"	"纪录片" -->

        </div>
    </div>
    </div>
</header>



  <div class="container">
    <div class="row">
        <div class="myui-panel myui-panel-bg clearfix">
            <div class="myui-panel-box clearfix" id="movielist">

            </div>
        </div>
    </div>
  </div>

  <ul class="myui-page text-center clearfix">
  </ul>

  <div class="myui-foot clearfix">
    <div class="container min">
        <div class="row">
            <div class="col-pd text-center masked">

                <!-- <p class="hidden-xs"> -->
                <p class="">
                    <a
                        href="https://www.youtube.com/embed/videoseries?list=PLyYNOzVuJM_0cCbjBvGHJRBittNhkbRDc&autostart=1&playinline=1">新聞直播</a>
                    <span class="split-line"></span>
                    <a
                        href="https://www.youtube.com/embed/ERT_7u5L0dc?list=RDCMUCK6cr8UqdrKZ4213X-FOStQ">電影音樂</a><span
                        class="split-line"></span>
                    <a
                        href="https://www.youtube.com/embed/videoseries?list=PLyYNOzVuJM_09a5uMIEFPs7Ltwprw3hPM">演唱會</a><span
                        class="split-line"></span>
                    <a
                        href="https://www.youtube.com/embed/videoseries?list=PLdE3Y3U0HligtAoAay48Kwl7RE_PD1RfG">中文流行歌曲</a><span
                        class="split-line"></span>
                    <a
                        href="https://www.youtube.com/embed/videoseries?list=PLoj6YVKua1uJmN0GxnD7gRoASjnsS_ATD">4K
                        MV</a><span class="split-line"></span>
                    <a
                        href="https://www.youtube.com/embed/videoseries?list=PLyYNOzVuJM_2SJSQiEHGMty12geoHo-CY">網路電影</a>
                    <span class="split-line"></span>
                </p>
                <p class="margin-0">本站為程式開發測試之用，資料蒐集於網際網路，版權歸官方所有 Powered by PKJ Studio 2022</p>
            </div>
        </div>
    </div>
</div>

<!-- <div id="bottom">
  <textarea id="output"></textarea>
</div> -->


<script>

  var urlParams;
  (window.onpopstate = function () {
    var match,
      pl     = /\+/g,  // Regex for replacing addition symbol with a space
      search = /([^&=]+)=?([^&]*)/g,
      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
      query  = window.location.search.substring(1);

    urlParams = {};
    while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);
  })();


  if (urlParams["t"] == null){ var t = "2"; } else { var t = urlParams["t"];}
  if (urlParams["pg"] == null){ var pg = "1"; } else { var pg = urlParams["pg"];}

  var urlAPI = 'https://api.haiwaikan.com/v1/vod?ac=detail';
  var cors_api_url = 'https://cors-anywhere.herokuapp.com/';

  function doCORSRequest(options, printResult) {
    var x = new XMLHttpRequest();
    x.open(options.method, cors_api_url + options.url);
    x.onload = x.onerror = function() 
    {
      var data = JSON.parse(x.responseText);

      page = data.page;
      pagecount = data.pagecount;

      let htmlString = '<ul>';
      
      for (let file of data.list) {
        var m3u8 = file.vod_play_url.split('$')[1];
        var img = file.vod_pic;
        var title = file.vod_name;
        var year = file.vod_year;
        var quality = file.vod_play_url.split('$')[0];
        var type_name = file.type_name;

        htmlString += '<li class="col-lg-10 col-md-8 col-sm-5 col-xs-3">';
        htmlString += '<div class="myui-vodlist__box">';
        htmlString += '<a class="myui-vodlist__thumb lazyload" href="'+ m3u8 + '" ';
        htmlString += 'title="' + title +'" ';
        htmlString += 'data-original="' + img + '" ';
        htmlString += 'style="background-image: url(' + img +')"';

        htmlString += '<span class="play hidden-xs"></span>';
        htmlString += '<span class="pic-tag pic-tag-top" style="background-color: #5bb7fe;">' + quality+'</span>';
        htmlString += '<span class="pic-text text-right">'+year+'</span>';
        htmlString += '<span class="pic-text text-left">'+type_name+'</span>';

        htmlString += '</a>';
        htmlString += '</div>';
        htmlString += '<div class="myui-vodlist__detail">';
        htmlString += '<h4 class="title text-overflow"><a href="'+m3u8+'">'+title+'</a></h4>';
        htmlString += '</div>';
        htmlString += '</li>';
      }

      htmlString += '</ul>';
      document.getElementsByClassName('myui-panel-box clearfix')[0].innerHTML = htmlString;
    
      // printResult(
      //     options.method + ' ' + options.url + '\n' +
      //     x.status + ' ' + x.statusText + '\n\n' +
      //     (x.responseText || '')
      // );
      
      var p = page;
      var bottom_p = pagecount;
      var referer = 'index.html?t=' + t
      if (p > 1) { prev_p = p-1;} else { prev_p = 1;}
      if (p < bottom_p) { next_p = p+1;} else { next_p = bottom_p;}
      // nav = '<ul class="myui-page text-center clearfix">';
      var nav = '<li class="hidden-xs"><a class="btn btn-default" href="' + referer+'&pg=1">1</a></li>';
      nav += '<li class="hidden-xs"><a class="btn btn-default" href="' + referer+'&pg=' + prev_p +'">Prev</a></li>';
      for (let i = p - 5; i < p + 5; i++) {
          if ( i == p ) {  nav += '<li class="hidden-xs"><a class="btn btn-warm" href="' + referer+'&pg=' + i +'">'+ i +'</a></li>'; }
          else if ( i < bottom_p && i > 0) {  nav += '<li class="hidden-xs"><a class="btn btn-default" href="' + referer+'&pg=' + i +'">'+ i +'</a></li>'; }
      }

      nav += '<li class="hidden-xs"><a class="btn btn-default" href="' + referer + '&pg=' + next_p +'">Next</a></li>';
      nav += '<li class="hidden-xs"><a class="btn btn-default" href="' + referer + '&pg=' + bottom_p +'">'+bottom_p+'</a></li>';
      // nav += '</ul>'

      document.getElementsByClassName('myui-page text-center clearfix')[0].innerHTML = nav;

    }
    x.send(options.data);
    return result;
  }



  var urlField = urlAPI + '&t=' + t + '&pg=' + pg;
  var outputField = document.getElementById('output');
  var j = doCORSRequest(
    { method: 'GET', url: urlField, }, 
    function printResult(result) {
        outputField.value = result;
    }
  )


</script>



<body>
</html>



